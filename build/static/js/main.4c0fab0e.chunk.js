(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{21:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n(1),o=n.n(r),a=n(15),u=n.n(a),i=(n(21),n(6)),d=n(3),l=n(4),s=n.n(l),b="/api/persons",f={getAll:function(){return s.a.get(b).then((function(e){return e.data}))},create:function(e){return s.a.post(b,e).then((function(e){return e.data}))},update:function(e,t){return s.a.put("".concat(b,"/").concat(e),t).then((function(e){return e.data}))},remove:function(e){return s.a.delete("".concat(b,"/").concat(e)).then((function(e){return console.log(e)}))}},j=function(e){var t=e.text,n=e.onClick;return Object(c.jsx)("button",{onClick:n,children:t})},h=function(e){var t=e.namesToShow,n=e.deleteName;return Object(c.jsx)("ul",{children:t.map((function(e){return Object(c.jsxs)("li",{children:[e.name," ",e.number," ",Object(c.jsx)(j,{text:"Delete",onClick:function(){return n(e.id)}})]},e.id)}))})},m=function(e){var t=e.message,n=e.successNotification;if(null===t)return null;var r=n?{color:"green",background:"lightgrey",fontSize:"20px",fontWeight:"bold",borderStyle:"solid",borderRadius:"5px",padding:"10px",marginBottom:"10px"}:{color:"red",background:"lightgrey",fontSize:"20px",fontWeight:"bold",borderStyle:"solid",borderRadius:"5px",padding:"10px",marginBottom:"10px"};return Object(c.jsx)("div",{style:r,children:t})},p=function(e){var t=e.text;return Object(c.jsx)("h2",{children:t})},O=function(e){var t=e.filter,n=e.handleFiltering;return Object(c.jsxs)("div",{children:["Filter shown with: ",Object(c.jsx)("input",{value:t,onChange:n}),Object(c.jsx)("br",{})]})},x=function(e){return Object(c.jsxs)("form",{onSubmit:e.handleAddOrUpdate,children:[Object(c.jsxs)("div",{children:["Name: ",Object(c.jsx)("input",{value:e.newName,onChange:e.handleNameChange}),Object(c.jsx)("br",{}),"Number: ",Object(c.jsx)("input",{value:e.newNumber,onChange:e.handleNumberChange})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",children:"add"})})]})},g=function(){var e=Object(r.useState)([]),t=Object(d.a)(e,2),n=t[0],o=t[1],a=Object(r.useState)(""),u=Object(d.a)(a,2),l=u[0],s=u[1],b=Object(r.useState)(""),j=Object(d.a)(b,2),g=j[0],v=j[1],w=Object(r.useState)(""),S=Object(d.a)(w,2),N=S[0],y=S[1],k=Object(r.useState)(!1),C=Object(d.a)(k,2),A=C[0],E=C[1],B=Object(r.useState)(null),F=Object(d.a)(B,2),T=F[0],W=F[1],z=Object(r.useState)(!0),D=Object(d.a)(z,2),J=D[0],L=D[1];Object(r.useEffect)((function(){f.getAll().then((function(e){o(e)}))}),[]);var R=function(e){W(e),setTimeout((function(){W(null)}),5e3)},U=function(){var e={name:l,number:g};f.create(e).then((function(e){L(!0),R("Succesfully added ".concat(e.name)),o(n.concat(e)),s(""),v("")})).catch((function(e){L(!1),R("Error happened while adding ".concat(e.name," to the phonebook"))}))},I=function(){if(window.confirm("".concat(l," is already added to phonebook, replace the old number with a new one?"))){var e=n.find((function(e){return e.name===l})),t=Object(i.a)(Object(i.a)({},e),{},{number:g});console.log(e),f.update(e.id,t).then((function(t){L(!0),R("Succesfully updated ".concat(t.name)),o(n.map((function(n){return n.id!==e.id?n:t}))),s(""),v("")})).catch((function(t){L(!1),R("Error happened while updating the number for ".concat(e.name))}))}},M=A?n.filter((function(e){return e.name.toLowerCase().startsWith(N.toLowerCase())})):n;return Object(c.jsxs)("div",{children:[Object(c.jsx)(m,{message:T,successNotification:J}),Object(c.jsx)(p,{text:"Phonebook"}),Object(c.jsx)(O,{filter:N,handleFiltering:function(e){""===e.target.value?E(!1):E(!0),y(e.target.value)}}),Object(c.jsx)(p,{text:"Add a new"}),Object(c.jsx)(x,{newName:l,newNumber:g,handleAddOrUpdate:function(e){e.preventDefault(),n.map((function(e){return e.name})).includes(l)?I():U()},handleNameChange:function(e){s(e.target.value)},handleNumberChange:function(e){v(e.target.value)}}),Object(c.jsx)(p,{text:"Numbers"}),Object(c.jsx)(h,{namesToShow:M,deleteName:function(e){return function(e){var t=n.find((function(t){return t.id===e}));window.confirm("Are you sure you want to delete ".concat(t.name," from phonebook?"))&&f.remove(e).then((function(){L(!0),R("Succesfully deleted ".concat(t.name));var c=n.filter((function(t){return t.id!==e}));o(c)})).catch((function(e){L(!1),R("Error happened while deleting ".concat(t.name," from phonebook"))}))}(e)}})]})};u.a.render(Object(c.jsx)(o.a.StrictMode,{children:Object(c.jsx)(g,{})}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.4c0fab0e.chunk.js.map